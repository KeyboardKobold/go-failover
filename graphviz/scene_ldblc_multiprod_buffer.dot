digraph {

    overlap=scale
    ratio="1.8"
    compound=true;

    subgraph cluster0 {
        label="Consumer";
        Consumer_1; Consumer_2;
    }

    subgraph cluster1 {
        label="Producer";
        Producer_1; Producer_2;
    }

    subgraph cluster2 {
            label="Buffer";
            { rank = source; Buffer_1 [label="Leader"]; Buffer_2; Buffer_3; }

    }

    {Producer_1 Producer_2} -> Buffer_1
    Buffer_1 -> { Buffer_2 Buffer_3}
    Buffer_1 -> { Consumer_1 Consumer_2 } [dir=both color="red:blue"]
    { Consumer_1 Consumer_2 } -> LoadBalancer [dir=both color="red:blue"]
    { rank = sink; Client }
    Client -> LoadBalancer [dir=both color="red:blue" constraint=false]

}