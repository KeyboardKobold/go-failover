digraph {

    overlap=scale
    rankdir=LR;
    compound=true;

    subgraph cluster0 {
        label="Consumer";
        a; b; c; d;
    }

    subgraph cluster1 {
            label="Buffer";
            Leader; f; g;
    }

    {Producer1 Producer2 Producer3} -> Leader
    Leader -> { f g}
    Leader -> a [dir=both color="red:blue" ltail="cluster1" lhead="cluster0"]
    { a b c d } -> LoadBalancer [dir=both color="red:blue"]
    Client -> LoadBalancer [dir=both color="red:blue"]
}