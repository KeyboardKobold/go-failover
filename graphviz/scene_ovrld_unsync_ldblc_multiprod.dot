digraph {
    overlap=scale
    ratio="1.5"
    compound=true;

    subgraph cluster0 {
        label="Consumer";
        Consumer_1; Consumer_2;
        rank="same";
    }

    subgraph cluster1 {
        label="Producer";
        Producer_1; Producer_2;
        rank="same";
    }

    Producer_1 -> Consumer_1
    Producer_2 -> Consumer_2
    { Consumer_1 Consumer_2 } -> LoadBalancer [dir=both color="red:blue"]


    { rank = sink; Client_1 [label="Client"] }
    { rank = sink; Client_2 [label="Client"] }
    { rank = sink; Client_3 [label="Client"] }

    Client_1 -> LoadBalancer [dir=both color="red:blue"]
    Client_2 -> LoadBalancer [dir=both color="red:blue"]
    Client_3 -> LoadBalancer [dir=both color="red:blue"]
}